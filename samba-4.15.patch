--- openchange-openchange-2.3-VULCAN/libmapi/IProfAdmin.c~	2015-05-16 17:22:04.000000000 +0200
+++ openchange-openchange-2.3-VULCAN/libmapi/IProfAdmin.c	2021-11-16 21:59:10.069774286 +0100
@@ -753,7 +753,7 @@
 _PUBLIC_ enum MAPISTATUS LoadProfile(struct mapi_context *mapi_ctx, 
 				     struct mapi_profile *profile)
 {
-	enum credentials_use_kerberos use_krb = CRED_AUTO_USE_KERBEROS;
+	enum credentials_use_kerberos use_krb = CRED_USE_KERBEROS_DESIRED;
 
 	/* Sanity checks */
 	OPENCHANGE_RETVAL_IF(!mapi_ctx, MAPI_E_NOT_INITIALIZED, NULL);
@@ -777,9 +777,9 @@
 	 * another API in the profile */
 	if (profile->kerberos) {
 		if (!strncmp(profile->kerberos, "yes", 3)) {
-			use_krb = CRED_MUST_USE_KERBEROS;
+			use_krb = CRED_USE_KERBEROS_REQUIRED;
 		} else {
-			use_krb = CRED_DONT_USE_KERBEROS;
+			use_krb = CRED_USE_KERBEROS_DISABLED;
 		}
 	}
 	/* additionally, don't set the username in the ccache if kerberos
@@ -787,14 +787,14 @@
 	 * credentials.  cli_credentials_guess probably gets the right
 	 * thing anyway in the situations where kerberos is in use */
 	if (profile->username && *(profile->username)
-	    && use_krb != CRED_MUST_USE_KERBEROS) {
+	    && use_krb != CRED_USE_KERBEROS_REQUIRED) {
 		cli_credentials_set_username(profile->credentials, profile->username, CRED_SPECIFIED);
 	}
 	if (profile->password && *(profile->password)) {
 		cli_credentials_set_password(profile->credentials, profile->password, CRED_SPECIFIED);
 	}
-	if (use_krb != CRED_AUTO_USE_KERBEROS) {
-		cli_credentials_set_kerberos_state(profile->credentials, use_krb);
+	if (use_krb != CRED_USE_KERBEROS_DESIRED) {
+		cli_credentials_set_kerberos_state(profile->credentials, use_krb, CRED_SPECIFIED);
 	}
 
 	return MAPI_E_SUCCESS;
